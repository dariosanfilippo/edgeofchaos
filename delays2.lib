/* Samplerate-independent delays. 
 * 
 * Copyright (c) 2019, Dario Sanfilippo <sanfilippo.dario at gmail dot com> All rights reserved. 
 */

de = library("delays.lib");
d2 = library("delays2.lib");
ma = library("maths.lib");
m2 = library("maths2.lib");

// integer delay
del(size, del, in) = in : de.delay(size*ma.SR, del*ma.SR);

// linear interpolation between samples
del_lin(size, del, in) = de.fdelay(size*ma.SR, del*ma.SR, in);

// polynomial interpolation
del_pol(size, del, in) = de.fdelayltv(4, s, d, in)
with {
      s = size*ma.SR : m2.round_pow2;
      d = del*ma.SR : max((4-1)/2);
};

// linear interpolation between two delay lines
del_smo(size, itime, del, in) = in : de.sdelay(s, it, d)
with {
      s = size*ma.SR;
      it = itime*ma.SR;
      d = del*ma.SR;
};


